!function(ue,ve,e){"use strict";ue(document).ready(function(){ue(".typolab-fonts-list .font-preview-iframe").each(function(e,t){var a=ue(t),n;a.find("iframe").on("load",function(){var e,t=ue(this.contentWindow.document).find(".single-entry"),n=t.outerHeight();a.css({lineHeight:n+"px",height:n}),t.find("p").width(a.width()),a.addClass("loaded")})}),ue(".fonts-list-select").each(function(e,t){var n=ue(t),s=n.find(".alphabet a"),i=n.find(".search-bar input"),r=n.find(".search-bar select"),l=n.find(".font-list"),a=n.find(".font-list-data"),f=ue('<div class="no-records">Nothing found!</div>'),p='<span class="checked"><i class="fa fa-check"></i></span>',c=n.data("font-source"),d=s.filter(".current").data("letter"),o=n.data("currentFont"),u=n.data("currentFontVariants"),v=n.data("currentFontSubsets"),m=function(a){s.removeClass("current"),s.filter('[data-letter="'+a+'"]').addClass("current"),i.val("");var o=!(!r.length||!r.val().length);w.removeClass("search-match search-unmatch letter-unmatch").filter(".active").removeClass("active"),w.filter(function(e,t){var n=ue(t);return a==ue(t).data("letter")?n.addClass("active"):o&&n.addClass("letter-unmatch"),t}),l.scrollTop(0),d=a},h=function(n){s.addClass("letter-unmatch").each(function(e,t){n[t.textContent]&&ue(t).removeClass("letter-unmatch").addClass("letter-match")})},g=function(a,e){var o=ue('<a href="#"></a>');if("google-fonts"==c){var t,n=(t=a.family).substring(0,1).toUpperCase();o.html(p+t).data({letter:n,category:a.category}).on("click",function(e,t,n){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),F(a,t,n)}),d==n&&o.addClass("active"),e&&setTimeout(function(){k=!1,o.trigger("click",[u,v])},1),o.appendTo(l)}else if("font-squirrel"==c){var t,n=(t=a.family_name).substring(0,1).toUpperCase();o.html(p+t).data({letter:n,category:a.classification}).on("click",function(e,t,n){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),I(a,t,n)}),d==n&&o.addClass("active"),e&&setTimeout(function(){k=!1,o.trigger("click",[u,v])},1),o.appendTo(l)}else if("premium-fonts"==c){var t,n=(t=a.family).substring(0,1).toUpperCase();o.html(p+t).data({letter:n,category:a.category}).on("click",function(e,t,n){e.preventDefault(),l.find("a").removeClass("current"),o.addClass("current"),T(a,t,n)}),d==n&&o.addClass("active"),e&&setTimeout(function(){k=!1,o.trigger("click",[u,v])},1),o.appendTo(l)}},y=JSON.parse(a.html());ue.each(y,function(e,t){var n=t.family?t.family:t.family_name;g(t,o==n)}),n.find(".loading-fonts").remove(),s.on("click",function(e){e.preventDefault(),m(ue(this).data("letter"))}),l.append(f);var w=l.find("a");i.on("keyup",function(e){var o=ue(this).val(),i=0;if(0==o.length)return w.removeClass("search-match search-unmatch"),void f.removeClass("active");w.each(function(e,t){var n=ue(t),a=n.text();a.match(new RegExp("^"+de(o),"i"))||a.match(new RegExp(" "+de(o),"i"))||a.match(new RegExp(de(o)+"$","i"))?(n.addClass("search-match").removeClass("search-unmatch"),i++):n.removeClass("search-match").addClass("search-unmatch")}),f[0<i?"removeClass":"addClass"]("active")}).on("blur",function(){0==ue(this).val().length&&w.removeClass("search-match search-unmatch")}),r.on("change",function(){var o=r.val();if(s.removeClass("letter-match letter-unmatch current"),w.removeClass("category-match category-unmatch letter-unmatch active"),o){var i={};w.filter(function(e,t){var n=ue(t);if(o==n.data("category")){var a=n.text().substring(0,1).toUpperCase();i[a]?i[a].count++:i[a]={letter:a,count:1},n.addClass("category-match")}else n.addClass("category-unmatch")}),h(i)}else d&&m(d)})}),ue("#typolab-wrapper .tooltip").each(function(e,t){ue(t).tooltipster({theme:"tooltipster-borderless"})}),ue("body").on("keydown",".font-downloader #request-filesystem-credentials-form input",function(e){if(13==e.keyCode)return ue(".font-downloader .hover .button-primary").click(),!1});var b="",k=!0,C=0,_=ue(".font-preview-container"),x=ue('#edit-font-form input[name="font_family"]'),S=ue('#edit-font-form textarea[name="font_data"]'),D=function(e,t,n,a){var o=ue('<div class="font-preview-row"></div>'),i=ue('<div class="font-preview-row-bg"></div>');_.append(o.clone().attr("id",e).addClass(a||"").append('<span class="row-title">'+t+"</span>").append(n).wrapInner(i))},g=function(e){switch(e){case"display":return"Display";break;case"handwriting":return"Handwriting";break;case"monospace":return"Monospace";break;case"sans-serif":return"Sans Serif";break;case"serif":return"Serif";break}return e},y=function(e){switch(e){case"latin":return"Latin";break;case"latin-ext":return"Latin Extended";break;case"cyrillic":return"Cyrillic";break;case"greek":return"Greek";break;case"vietnamese":return"Vietnamese";break;case"cyrillic-ext":return"Cyrillic Extended";break;case"greek-ext":return"Greek Extended";break}return e},F=function(d,u,v){if(b==d.family)return!1;b=d.family,ve.clearInterval(C),_.html(""),D("font-family-name","Font Family:",'<p class="font-family-name">'+d.family+"</p>");var m=ue("<iframe></iframe>"),h=ue('<p class="description">Loading font preview...</p>'),e=ajaxurl+"?action=typolab-preview-google-fonts&font-family="+encodeURIComponent(d.family);return m.attr({src:e}).on("load",function(){var e=ue(this.contentWindow.document);h.remove(),m.height(e.height()),C=setInterval(function(){m.height(e.height())},50),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0,m.after('<p class="font-details-link"><a href="https://fonts.google.com/specimen/'+encodeURIComponent(d.family)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+g(d.category)+"</p>"),x.val(d.family),S.val(JSON.stringify(d));var t=ue('<div class="checkboxes-container"></div>'),n=u?u.split(","):["regular"];for(var a in d.variants){var o=d.variants[a],i=ue("<label></label>"),s=ue('<input type="checkbox" name="font_variants[]" value="'+o+'" '+(-1!=ue.inArray(o,n)?"checked":"")+">");s.on("change",N),i.append(s),i.append("<span>"+(0<o.indexOf("italic")?o.replace("italic",", italic"):o)+"</span>").appendTo(t)}D("font-preview-variants","Font Variants",t,"half");var r=ue('<div class="checkboxes-container"></div>'),l=v?v.split(","):["latin"];for(var a in d.subsets){var f=d.subsets[a],p=ue("<label></label>");p.append('<input type="checkbox" name="font_subsets[]" value="'+f+'" '+(-1!=ue.inArray(f,l)?"checked":"")+">"),p.append("<span>"+y(f)+"</span>").appendTo(r)}D("font-preview-subsets","Font Subsets",r,"half");var c=Math.max(t.outerHeight(),r.outerHeight());t.add(r).css({minHeight:c}),ue(".fonts-list-select .font-list").css({maxHeight:Math.max(ue(".font-preview-container").outerHeight()-95,450)}),N()}),D("font-preview-iframe","Live Preview",[h,m]),!0},I=function(d,u,e){var t,v=JSON.parse(ue(".font-squirrel-data").html()).downloadedFonts[d.family_urlname];return b!=d.family_name&&(b=d.family_name,ve.clearInterval(C),_.html(""),D("font-family-name","Font Family:",'<p class="font-family-name">'+d.family_name+"</p>"),x.val(d.family_name),ue.getJSON("https://www.fontsquirrel.com/api/familyinfo/"+d.family_urlname,function(e){var i=ue('<div class="checkboxes-container"></div>'),s=u?u.split(","):[],r=["Regular"];if(ue.each(e,function(e,t){var n=t.style_name,a=ue('<input type="checkbox" name="font_variants[]" value="'+t.fontface_name+'" '+(-1!=ue.inArray(t.fontface_name,s)?"checked":"")+">"),o=ue("<label></label>");s.length||-1==ue.inArray(t.style_name,r)||a.prop("checked",!0),a.on("change",N),o.append(a),o.append('<span title="'+t.fontface_name+'">'+t.style_name+"</span>").appendTo(i)}),S.val(JSON.stringify(e)),v){var t=ue("<iframe></iframe>"),n=ue('<p class="description">Loading font preview...</p>'),a=ajaxurl+"?action=typolab-preview-font-squirrel&font-family="+encodeURIComponent(d.family_urlname);return t.attr({src:a}).on("load",function(){var e=ue(this.contentWindow.document);n.remove(),t.height(e.height()),C=setInterval(function(){t.height(e.height())},100),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0;var a=ue('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');t.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(d.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+d.classification+"</p>"),t.next().append(a),a.on("click",function(e){if(e.preventDefault(),a.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(a.addClass("fa-spin").attr("title","Downloading font..."),j("font-squirrel",d.family_urlname,function(e){if(a.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else a.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))}),D("font-preview-variants","Font Variants",i),N()}),D("font-preview-iframe","Live Preview",[n,t]),J(),!0}var o=ue('<div class="external-font-previews"></div>'),l=ue('<p class="description">Loading font preview...</p>');D("font-preview-iframe","Preview",[l,o]),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0;var f=m(e);l.remove(),o.append(f),o.after('<p class="font-details-link"><a href="https://www.fontsquirrel.com/fonts/'+encodeURIComponent(d.family_urlname)+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+d.classification+"</p>"),D("font-preview-variants","Font Variants",i),N();var p="<p>You need to download and install this font in order to use it in this site.<br>";p+="Installation process is automatic, simply click the button below:</p>";var c=ue('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>');D("font-squirrel-downloader","Install Font",[p,ue('<p class="hover">').append(c)],"font-downloader"),c.on("click",function(e){if(e.preventDefault(),c.hasClass("disabled"))return!1;if(q()){var t=L();if(!t.hostname||!t.password||!t.username)return alert("Please enter connection credentials to proceed!"),!1}c.addClass("disabled").html("Installing font..."),j("font-squirrel",d.family_urlname,function(e){var t=ue("#font-squirrel-downloader .font-preview-row-bg");if(c.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors)for(var n in t.append('<div class="notice notice-error"></div>'),e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[n]+"</p>");else t.find("p, .download-font").remove(),q()&&ue("#request-filesystem-credentials-form").parent().remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click <strong>Save Changes</strong> button.</p>')})}),E("Font is not installed")}),!0)},T=function(n,e,t){var o=JSON.parse(ue(".premium-font-data").html()),i=o.downloadedFonts[n.family_urlname];if(b==n.family)return!1;var s=ue('<div class="checkboxes-container"></div>'),r=e?e.split(","):[],l=["FunctionProBold","FunctionProBook","FunctionProDemi","FunctionProExtraBold","FunctionProLight","FunctionProMedium"];ue.each(n.variants,function(e,t){var n=ue('<input type="checkbox" name="font_variants[]" value="'+e+'" '+(-1!=ue.inArray(e,r)?"checked":"")+">"),a=ue("<label></label>");r.length||-1==ue.inArray(t.name,l)||n.prop("checked",!0),n.on("change",N),a.append(n),a.append('<span title="'+e+'">'+t.name+"</span>").appendTo(s)});var f=ue('<div class="checkboxes-container"></div>'),a=t?t.split(","):["macroman"];if(ue.each(n.subsets,function(e,t){var n=ue("<label></label>");n.append('<input type="checkbox" name="font_subsets[]" value="'+e+'" '+(-1!=ue.inArray(e,a)?"checked":"")+">"),n.append("<span>"+t+"</span>").appendTo(f)}),_.html(""),x.val(n.family),S.val(JSON.stringify(n)),D("font-family-name","Font Family:",'<p class="font-family-name">'+n.family+"</p>"),i){var p=ue("<iframe></iframe>"),c=ue('<p class="description">Loading font preview...</p>'),d=ajaxurl+"?action=typolab-preview-premium-fonts&font-family="+encodeURIComponent(n.family_urlname);return p.attr({src:d}).on("load",function(){var e=ue(this.contentWindow.document);c.remove(),p.height(e.height()),C=setInterval(function(){p.height(e.height())},100),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0;var a=ue('<a href="#" class="font-redownload" title="Re-download font"><i class="fa fa-refresh"></i></a>');p.after('<p class="font-details-link"><a href="'+n.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+n.category+(i?"":' <span class="sep"></span> Size: '+n.size)+"</p>"),o.isActivated&&o.licenseKey&&(p.next().append(a),a.on("click",function(e){if(e.preventDefault(),a.hasClass("is-downloaded"))return!1;confirm("Confirm font re-download?")&&(a.addClass("fa-spin").attr("title","Downloading font..."),j("premium-fonts",n.family,function(e){if(a.removeClass("fa-spin"),e.errors){var t="";for(var n in e.error_msg)t+="\n"+e.error_msg[n];alert(t.trim())}else a.addClass("is-downloaded").html('<i class="fa fa-check"></i>').attr("title","Font has been downloaded successfully!")}))})),D("font-preview-variants","Font Variants",s,"two-thirds"),D("font-preview-subsets","Font Subsets",f,"one-third"),N()}),D("font-preview-iframe","Live Preview",[c,p]),J(),!0}var u=ue('<div class="external-font-previews"></div>'),v=ue('<p class="description">Loading font preview...</p>');D("font-preview-iframe","Preview",[v,u]);var m=z(n.variants);v.remove(),u.append(m),u.after('<p class="font-details-link"><a href="'+n.creator+'" target="_blank">Font Details</a> <span class="sep"></span> Category: '+n.category+(i?"":' <span class="sep"></span> Size: '+n.size)+"</p>"),D("font-preview-variants","Font Variants",s,"two-thirds"),D("font-preview-subsets","Font Subsets",f,"one-third"),N();var h="<p>You need to download and install this font in order to use it in this site.<br>";h+="Installation process is automatic, simply click the button below:</p>";var g=ue('<a href="#install-font-package" class="button-primary download-font">Download &amp; Install Font</a>'),y="",w=q()?typolab_request_system_credentials_form:"";o.isActivated&&o.licenseKey?g.on("click",function(e){if(e.preventDefault(),g.hasClass("disabled"))return!1;if(q()){var t=L();if(!t.hostname||!t.password||!t.username)return alert("Please enter connection credentials to proceed!"),!1}g.addClass("disabled").html("Installing font..."),j("premium-fonts",n.family,function(e){var t=ue("#premium-font-downloader .font-preview-row-bg");if(g.removeClass("disabled").html("Download &amp; Install Font"),t.find(".notice-error").remove(),e.errors)for(var n in t.append('<div class="notice notice-error"></div>'),e.error_msg)t.find(".notice-error").append("<p>"+e.error_msg[n]+"</p>");else t.find("p, .download-font").remove(),q()&&ue("#request-filesystem-credentials-form").parent().remove(),t.append('<p class="font-installed"><i class="fa fa-check"></i> Font has been installed successfully. Review font settings and click  <strong>Save Changes</strong> button.</p>')})}):(g.addClass("disabled").on("click",function(e){return!1}),y='<div class="notice notice-warning"><p>To download this font you must <a href="admin.php?page=kalium-product-registration">activate the theme</a>.</p></div>'),D("premium-font-downloader","Install Font",[h,w,ue('<p class="hover">').append(g),y],"font-downloader"),E("Font is not installed")},m=function(e){var a=ue("<div></div>");return ue.each(e,function(e,t){var n=ue('<div class="preview-entry"></div>');n.append('<img src="'+t.listing_image+'">'),n.append("<span>"+t.style_name+"</span>"),a.append(n)}),a.children()},z=function(e){var a=ue("<div></div>");return ue.each(e,function(e,t){var n=ue('<div class="preview-entry"></div>');t.screenshot&&(n.append('<img src="https://api.laborator.co/assets/img/font-previews/'+t.screenshot+'">'),n.append("<span>"+t.name+"</span>"),a.append(n))}),a.children()},j=function(e,t,n){var a,o=ue(".fonts-list-select .font-list");switch(o.addClass("download-in-progress"),e){case"font-squirrel":a="typolab_font_squirrel_download";break;case"premium-fonts":a="typolab_premium_fonts_download";break}if(!a)return!1;var i={action:a,font_family:t};return ue.post(ajaxurl,ue.extend(i,L()),function(e){o.removeClass("download-in-progress"),"function"==typeof n&&n.apply(this,[e]),J()},"json"),!0},q=function(){return!1;return"string"==typeof typolab_request_system_credentials_form},L=function(){var n={},e,t;ue("#request-filesystem-credentials-form").length&&ue("#request-filesystem-credentials-form").find('input[type="text"], input[type="password"], input[type="hidden"], input:checked, input[type="submit"]').each(function(e,t){n[ue(t).attr("name")]=ue(t).val()});return n},N=function(){var a=ue('#font-preview-variants input[type="checkbox"]:checked'),e=ue(".font-selectors-list .font-variants select"),t=ue(".font-selectors-list .font-weight select"),n=ue(".custom-font-form-layout");if(n.length){var o=[];n.find('#font-family-names input[name="font_variants[]"]').each(function(e,t){var n=ue(t).val();n=n.replace(/(font-family:|\'|\")/gi,"").trim(),ue.each(n.split(";"),function(e,t){(t=t.split(",")[0]).trim().length&&o.push(ue("<input>").attr({value:t.split(",")[0]}))}),a=ue(o)})}e.each(function(e,t){var i=ue(t),s=i.data("selected"),n=0<a.length;i.find("option, optgroup").remove(),i.prop("disabled",0==n)[n?"removeClass":"addClass"]("disabled"),n||i.append("<option>- No font variants -</option>"),a.each(function(e,t){var n,a=ue(t).val(),o=ue("<option>"+a+"</option>").val(a);i.append(o),a==s&&o.prop("selected",!0)})});var i=f();0<i.length&&e.each(function(e,t){var a=ue(t),o=a.data("selected");a.find("option, optgroup").remove(),a.prop("disabled",!1).removeClass("disabled"),ue.each(i,function(e,t){var n=ue("<option>"+t.title+"</option>").val(t.value);a.append(n),t.value==o&&n.prop("selected",!0)})}),t.each(function(e,t){var n=ue(t),a=n.data("selected");n.find("option, optgroup").remove(),n.append('<option value="">Default</option>');for(var e=100;e<=900;e+=100){var o=ue('<option value="'+e+'">'+e+"</option>");n.append(o),e==a&&o.prop("selected",!0)}});var s=ue("#font-preview-variants"),r=ue("#font-preview-subsets"),l;s.length&&r.length&&s.add(r).find(".font-preview-row-bg").css("min-height","").css("min-height",Math.max(s.outerHeight(),r.outerHeight()))},t=function(){var e=ue(".custom-font-form-layout"),t=e.find("#font_url").val(),o=[];if(e.find('#font-family-names input[name="font_variants[]"]').each(function(e,t){var n=ue(t).val().split(";");for(var a in n)o.push(n[a])}),!t||0==o.join("").trim().length||e.data("last-value")==t+o.join(";"))return!1;e.data("last-value",t+o.join(";")),_.html("");var n=ue("<iframe></iframe>"),a=ue('<p class="description">Loading font preview...</p>'),i=ajaxurl+"?action=typolab-preview-custom-font&font-url="+encodeURIComponent(t)+"&font-family="+encodeURIComponent(o.join(";"));return n.attr({src:i}).on("load",function(){var e=ue(this.contentWindow.document);a.remove(),n.height(e.height()),C=setInterval(function(){n.height(e.height())},50),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0,N()}),D("font-preview-iframe","Live Preview",[a,n]),!0},n=function(){var e=ue(".typekit-font-form-layout"),a=e.find("#kit_id").val();if(!a||e.data("kit-id")==a)return!1;e.data("kit-id",a),_.html("");var o=ue("<iframe></iframe>"),i=ue('<p class="description">Loading font preview...</p>'),t=ajaxurl+"?action=typolab-preview-typekit-font&kit-id="+encodeURIComponent(a);return o.attr({src:t}).on("load",function(){var e=ue(this.contentWindow.document);if(i.remove(),o.height(e.height()),C=setInterval(function(){o.height(e.height())},50),k&&ue("html, body").animate({scrollTop:_.offset().top-50}),k=!0,"undefined"!=this.contentWindow.kitInfo.kit){var t=this.contentWindow.kitInfo.kit,n=[];ue.each(t.families,function(e,t){n.push('<a href="https://typekit.com/fonts/'+t.slug+'" title="Variations: '+t.variations.join(", ")+'" target="_blank">'+t.name+"</a>")}),o.after('<p class="font-details-link">Font Families: '+n.join(", ")+'<a href="https://typekit.com/kit_editor/kits/'+a+'" class="font-redownload" target="_blank" title="Kit Settings"><i class="fa fa-cog"></i></a></p>')}}),D("font-preview-iframe","Live Preview",[i,o]),!0},a=function(e){if("template"in wp&&v.length){var t=wp.template("uploaded-font-entry"),n={index:h.length};"object"==typeof e&&ue.extend(n,e),n.entryId="uploaded-font-entry-"+n.index,h.push({data:n,html:t(n)}),o()}},v=ue(".uploaded-font-form-layout"),o=function(){for(var e in v.find(".typolab-table").remove(),h){var t=h[e],n=t.data,a=ue(t.html),o,i;a.find("#"+n.entryId+"-weight").find('option[value="'+n.weight+'"]').prop("selected",!0),a.find("#"+n.entryId+"-style").find('option[value="'+n.style+'"]').prop("selected",!0),"files"in n&&(a.find("#"+n.entryId+"-file-woff").val(n.files.woff),a.find("#"+n.entryId+"-file-woff2").val(n.files.woff2),a.find("#"+n.entryId+"-file-ttf").val(n.files.ttf),a.find("#"+n.entryId+"-file-svg").val(n.files.svg),a.find("#"+n.entryId+"-file-eot").val(n.files.eot)),a.data("data-index",n.index),v.append(a)}},h=[],w=ue(".uploaded-font-form-layout").length&&ue("#font_face"),e=ue.trim(ue("#uploaded-font-variants").html());if(e)for(var i in e=JSON.parse(e))a(e[i]);v.on("click",".delete",function(e){if(e.preventDefault(),confirm("Confim delete?")){var t=ue(this).closest(".typolab-table").data("dataIndex");for(var n in h)t==h[n].data.index&&delete h[n];o(),c()}}),ue("#add-uploaded-font-variant").on("click",function(e){e.preventDefault(),a()}),v.length&&v.sortable(),v.on("click",".font-file-entry .button",function(e){e.preventDefault();var t=ue(this),n=t.prev(),a=t.parent(),o="";a.hasClass("font-file-woff")?o="woff":a.hasClass("font-file-woff2")?o="woff2":a.hasClass("font-file-ttf")?o="ttf":a.hasClass("font-file-svg")?o="svg":a.hasClass("font-file-eot")&&(o="eot");var i=wp.media({title:"Upload ."+o+" font file",multiple:!1,library:{type:["font","application"]}});i.on("select",function(){var e=i.state().get("selection").first().toJSON();n.val(e.url)}),i.open()}),ue("#typolab-wrapper").on("click",".typolab-toggle-body",function(e){e.preventDefault(),ue(this).closest(".typolab-table").toggleClass("typolab-toggle--toggled")});var s=function(){if("template"in wp&&v.length){var e=ue("#uploaded-font-preview-data"),t=ue(".font-preview-container"),n=w.val(),a="\n",o="\t",i="<style>\n",s=[],r=wp.template("font-preview");if(0!==e.length&&0!==h.length){for(var l in h){var f,p=h[l].data,c=p.files,d=[];d.push("local('"+n+"')"),d.push("local('"+n.replace(/\s/g,"-")+"')"),c&&(c.eot&&d.push("url('"+c.eot+"?#iefix') format('embedded-opentype')"),c.woff&&d.push("url('"+c.woff+"') format('woff')"),c.woff2&&d.push("url('"+c.woff2+"') format('woff2')"),c.ttf&&d.push("url('"+c.ttf+"') format('truetype')"),c.svg&&d.push("url('"+c.svg+"#svgFont') format('svg')")),i+="@font-face {\n",i+="\tfont-family: '"+n+"';"+a,i+="\tfont-style: "+p.style+";"+a,i+="\tfont-weight: "+p.weight+";"+a,c&&c.eot&&(i+="\tsrc: url('"+c.eot+"');"+a),i+="\tsrc: "+d.join(", ")+";"+a,i+="}",s.push({family:n,style:p.style,weight:p.weight})}i+="\n</style>",e.html(i);var u=r({variants:s});t.html(u)}}};s(),e||a();var r=function(){ue(".uploaded-font-form-layout .typolab-table").each(function(e,t){var n=ue(t),a=n.data("dataIndex"),o=n.find(".select-font-style").val(),i=n.find(".select-font-weight").val(),s={woff:n.find(".font-file-woff input").val(),woff2:n.find(".font-file-woff2 input").val(),ttf:n.find(".font-file-ttf input").val(),eot:n.find(".font-file-eot input").val(),svg:n.find(".font-file-svg input").val()};for(var r in h)a==h[r].data.index&&(h[r].data.style=o,h[r].data.weight=i,h[r].data.files=s)})},f=function(){var e=[],t=w&&w.val();for(var n in h){var a=h[n].data,o=t+" ("+a.style+","+a.weight+")",i=t;"normal"===a.style&&"normal"===a.weight||(i+=" (",a.style&&"normal"!==a.style&&(i+=a.style.charAt(0).toUpperCase()+a.style.slice(1)),a.weight&&"normal"!==a.weight&&(i+=("normal"!==a.style?", ":"")+a.weight),i+=")"),e.push({value:o,title:i})}return e},l=function(){r(),s(),N()};if(w){var p=null,c=function(){ve.clearTimeout(p),p=null,p=setTimeout(l,250)};w.on("keyup",c),v.on("change","select, input",c)}if(1==ue("form#edit-font-form").length){var P=ue(".font-selectors-list tbody"),R=P.find(".no-records").clone();P.sortable({helper:function(e,t){return t.children().each(function(){ue(this).width(ue(this).width())}),t},handle:".sort-css-rule-row",axis:"y"});var d=ue("#edit-font-form #save_font_changes");d.data("text",d.val());var u=ue(".typekit-font-form-layout");u.length&&(u.on("blur","#kit_id",n),u.find("#typekit-font-generate-preview").on("click",function(e){e.preventDefault(),n()}),k=!1,n());var U=ue(".custom-font-form-layout");if(U.length){var A=U.find(".font-family-entries"),H=ue('<li><input type="text" name="font_variants[]" value="" required="required"><a href="#" class="remove"><i class="fa fa-remove"></i></a></li>');U.on("click","#add-custom-font-input",function(e){e.preventDefault(),A.append(H.clone()).find("li:last-child input").focus()}),A.on("click","a.remove",function(e){if(e.preventDefault(),0<ue(this).prev().val().length&&!confirm("Are you sure you want to delete this font family name?"))return!1;ue(this).parent().remove(),N()}),U.on("blur",'#font_url, #font-family-names input[name="font_variants[]"]',t).find("#custom-font-generate-preview").on("click",function(e){e.preventDefault(),t()}),k=!1,t()}var O=ue("#typolab-toggle-advanced-options");O.on("click",function(e){e.preventDefault(),O.toggleClass("shown").html(O.hasClass("shown")?O.data("hide-options"):O.data("show-options"))}).html(O.hasClass("shown")?O.data("hide-options"):O.data("show-options"));var J=function(){d.removeClass("disabled").prop("disabled",!1).val(d.data("text"))},E=function(e){d.addClass("disabled").prop("disabled",!0),e&&d.val(e)},V=function(e){var t=P.find("tr"),n=t.length+1+(e||0);return t.filter("#css-selector-"+n).length?V(e?e+1:1):n},W=function(n,e){if("function"!=typeof n){var t=ue("<tr></tr>"),a=ue('<td class="font-drag"></td>'),o=ue('<td class="font-selector"></td>'),i=ue('<td class="font-variants"></td>'),s=ue('<td class="font-weight"></td>'),r=ue('<td class="font-sizes"></td>'),l=ue('<td class="font-case"></td>'),f=ue('<td class="font-selector-action"></td>'),p=ue(".custom-font-form-layout").is(".is-adobe-font");t.append(a).append(o).append(i),p&&t.append(s),t.append(l).append(r).append(f),P.find(".no-records").remove();var c=V();t.attr("id","css-selector-"+c);var d=ue("<input>").attr({type:"text",required:!0,placeholder:"CSS Selector Rule"+(1==c?" (i.e.: body, p, .myclass)":""),name:"font_selectors["+c+"][selector]",tabIndex:c,value:n&&n.selector?n.selector:""}),u;d.appendTo(o),ue('<a href="#" class="sort-css-rule-row"><i class="fa fa-bars"></i></a>').appendTo(a);var v=ue("<select>").attr({name:"font_selectors["+c+"][variant]"});if(n&&n.variant&&v.data("selected",n.variant),v.append('<option value="" selected disabled>Loading...</option>').appendTo(i).on("change",function(e){ue(this).data("selected",ue(this).val())}),p){var m=ue("<select>").attr({name:"font_selectors["+c+"][weight]"});n&&n.weight&&m.data("selected",n.weight),m.append('<option value="" selected disabled>Loading...</option>').appendTo(s).on("change",function(e){ue(this).data("selected",ue(this).val())})}var h=ue("<select>").attr({className:"font-case",name:"font_selectors["+c+"][text-transform]",tabIndex:c,title:"Value for `fext-transform` property"}),g={"":"Default",uppercase:"Upper case",lowercase:"Lower case",capitalize:"Capitalize"};for(var y in g)ue("<option>",{value:y}).text(g[y]).attr("selected",1==(n&&n["text-transform"]&&y==n["text-transform"])).appendTo(h);h.appendTo(l);var w=ue("<input>").attr({type:"number",placeholder:"General",className:"font-size-general",step:"any",name:"font_selectors["+c+"][font-sizes][general]",tabIndex:c,value:n&&n.fontSizes&&n.fontSizes.general?n.fontSizes.general:""}),b=ue("<input>").attr({type:"number",placeholder:"Desktop",className:"font-size-desktop",step:"any",name:"font_selectors["+c+"][font-sizes][desktop]",tabIndex:c,value:n&&n.fontSizes&&n.fontSizes.desktop?n.fontSizes.desktop:""}),k=ue("<input>").attr({type:"number",placeholder:"Tablet",className:"font-size-tablet",step:"any",name:"font_selectors["+c+"][font-sizes][tablet]",tabIndex:c,value:n&&n.fontSizes&&n.fontSizes.tablet?n.fontSizes.tablet:""}),C=ue("<input>").attr({type:"number",placeholder:"Mobile",className:"font-size-mobile",step:"any",name:"font_selectors["+c+"][font-sizes][mobile]",tabIndex:c,value:n&&n.fontSizes&&n.fontSizes.mobile?n.fontSizes.mobile:""});w.appendTo(r),b.appendTo(r),k.appendTo(r),C.appendTo(r);var _=ue("<select>").attr({name:"font_selectors["+c+"][font-sizes][unit]"});_.append('<option value="px">px</option>'),_.append('<option value="em">em</option>'),_.append('<option value="rem">rem</option>'),_.append('<option value="%">%</option>'),n&&n.fontSizes&&n.fontSizes.unit&&_.find("option").each(function(e,t){n.fontSizes.unit==ue(t).val()&&ue(t).prop("selected",!0)}),_.appendTo(r);var x=ue('<a href="#" class="remove-font-selector"><i class="fa fa-remove"></i></a>');x.on("click",function(e){e.preventDefault(),(0==d.val().trim().length||confirm("Confirm delete?"))&&(t.remove(),0==P.find("tr:not(.no-records)").length&&P.append(R))}),x.appendTo(f),P.append(t),e&&d.focus()}},G=ue("script#font-selectors");if(G.length){var M=JSON.parse(G.html());for(var B in M)W(M[B])}var K=ue(".predefined-css-selectors"),$=function(e){var t;ue(e.target).closest(K).length||K.removeClass("shown")};K.on("click",".button",function(e){e.preventDefault(),K.toggleClass("shown"),K.hasClass("shown")?ue(ve).on("click",$):ue(ve).off("click",$)}),K.on("click","ul li a",function(e){e.preventDefault();var t=ue(this).data("selectors"),n=[];for(var a in t)n.push(t[a]);W({selector:n.join(", ")}),K.removeClass("shown"),N()}),N(),ue("#add-new-selector").on("click",function(e){e.preventDefault(),W(null,!0),N()});var Y=ue(".font-conditional-loading tbody"),Q=ue("script#conditional-statements");if(Q)var X=JSON.parse(Q.html());var Z=function(a){var t=ue("<tr></tr>"),e=ue("<td></td>").addClass("statement"),n=ue("<td></td>").addClass("operator"),o=ue("<td></td>").addClass("criteria"),i=ue("<td></td>").addClass("actions");Y.find(".no-statements").remove(),Y.append('<tr><td colspan="4" class="or-label"><span>OR</span></td></tr>');var s=ue("<select></select>").attr("name","statements[]"),r=[];r.push({value:"post_type",text:"Post Type",group:"General"}),r.push({value:"page_type",text:"Page Type",group:"General"}),r.push({value:"page_template",text:"Page Template",group:"General"}),ue.each(X.data.post_types,function(e,t){r.push({value:e,text:t.singular,group:"Post Types"})}),ue.each(X.data.taxonomies,function(e,t){r.push({value:e,text:t.singular,group:"Taxonomy :: "+X.data.post_types[t.post_type].name})});var l={};ue.each(r,function(e,t){var n=ue('<option value="'+t.value+'">'+t.text+"</option>");t.group?(l[t.group]||(l[t.group]=ue("<optgroup></optgroup>").attr("label",t.group),l[t.group].appendTo(s)),l[t.group].append(n)):n.appendTo(s),a&&a.statement==t.value&&n.attr("selected",!0)}),s.on("change",function(e){ee(s.val(),p)}),e.append(s);var f=ue("<select></select>").attr({name:"operators[]"});f.append('<option value="==">is</option>'),f.append('<option value="!=">is not</option>'),n.append(f),a&&f.find('option[value="'+a.operator+'"]').prop("selected",!0);var p=ue("<select></select>").attr({name:"criterions[]",class:"is-loading"});p.append('<option value="" class="loading-options">Loading options...</option>'),o.append(p),p.on("valuesSet",function(e,t){a&&t==a.statement&&ue(this).find("option").each(function(e,t){ue(t).val()==a.criteria&&ue(t).prop("selected",!0)})});var c=ue('<a href="#" class="remove-conditional-statement"><i class="fa fa-remove"></i></a>');c.on("click",function(e){e.preventDefault(),confirm("Confirm delete?")&&(t.prev().remove(),t.remove(),0==Y.find("tr").length&&Y.append(
'<tr class="no-statements"><td colspan="4">No defined conditional statements. Font will be loaded in all pages.</td></tr>'))}),c.appendTo(i),Y.append(t.append(e).append(n).append(o).append(i)),s.trigger("change")},ee=function(t,n){return n.addClass("is-loading").find("option").remove(),n.append('<option value="">Loading data...</option>'),"post_type"==t?(n.removeClass("is-loading").find("option").remove(),ue.each(X.data.post_types,function(e,t){n.append(ue('<option value="'+e+'">'+t.singular+"</option>"))}),n.trigger("valuesSet",t)):"page_type"==t?(n.removeClass("is-loading").find("option").remove(),ue.each(X.data.page_types,function(e,t){n.append(ue('<option value="'+e+'">'+t.name+"</option>"))}),n.trigger("valuesSet",t)):"page_template"==t?(n.removeClass("is-loading").find("option").remove(),ue.each(X.data.page_template,function(e,t){n.append(ue('<option value="'+e+'">'+t.name+"</option>"))}),n.trigger("valuesSet",t)):X.data[t]?(n.removeClass("is-loading").find("option").remove(),ue.each(X.data[t],function(e,t){n.append('<option value="'+t.value+'">'+t.text+"</option>")}),0==X.data[t].length&&n.addClass("is-loading").append('<option value="">:: No Entries Found ::</option>'),n.trigger("valuesSet",t)):X.data.post_types[t]?X.data[t]||ue.post(ajaxurl,{action:"typolab_get_post_type_entries",post_type:t},function(e){e.success&&(X.data[t]=e.entries,ee(t,n))},"json"):X.data.taxonomies[t]&&(X.data[t]||ue.post(ajaxurl,{action:"typolab_get_taxonomy_entries",taxonomy:t},function(e){e.success&&(X.data[t]=e.entries,ee(t,n))},"json")),n};ue("#add-new-conditional-statement").on("click",function(e){e.preventDefault(),Z()}),ue.each(X.statements,function(e,t){Z(t)});var te=ue('select[name="font_status"]');if(te.length){var ne=function(){te.closest(".grouped-input")["published"==te.val()?"addClass":"removeClass"]("green")};te.on("change",ne),ne()}}ue(".font-sizes-container").length&&(ue(".font-sizes-container .show-responsive-options").on("click",function(e){e.preventDefault(),ue(this).closest(".font-size-group").toggleClass("responsive-options-shown")}),ue(".font-sizes-container .font-size-group").each(function(e,t){var n=ue(t);n.find("table tbody .hidden input").filter(function(e,t){return 0<ue(t).val().length}).length&&n.addClass("responsive-options-shown"),n.find("table tbody .hidden select").filter(function(e,t){return 0<ue(t).val().length}).length&&n.addClass("responsive-options-shown")}),ue(".add-font-selectors-table").on("click",".add-entry",function(e){e.preventDefault();var t=ue(this).closest("tr").clone(),n=ue('<a class="remove" title="Delete Selector" href="#"><i class="fa fa-remove"></i></a>');t.find("input").val(""),t.find(".add-remove *").remove(),t.find(".add-remove").append(n),ue(this).closest("tbody").append(t),n.on("click",function(e){e.preventDefault(),confirm("Confirm delete of CSS selector")&&t.remove()}),t.find("input:first").focus()}),ue("#new-font-sizes-group").on("click",function(e){e.preventDefault(),ue(".add-new-font-size-group-container").slideToggle("normal",function(){ue(this).find("input, textarea").first().focus()})}),ue(".delete-custom-font-sizes-group").on("click",function(e){confirm("Are you sure you want to delete this font size group?")||e.preventDefault()}));var ae=ue("#typolab-advanced-settings");if(ae.length){ue(".typolab-toggle-advanced-font-settings").on("click",function(e){e.preventDefault(),ae.slideToggle(300)});var oe=ae.find(".font-export-options"),ie=ae.find(".font-export-loading"),se=ae.find(".font-export-code"),re=ae.find("#typolab-export-settings");re.on("click",function(e){e.preventDefault();var t=oe.find("#typolab_export_font_faces").is(":checked")?1:0,n=oe.find("#typolab_export_font_sizes").is(":checked")?1:0,a=oe.find("#typolab_export_font_settings").is(":checked")?1:0;if(oe.hasClass("is-loading")||oe.hasClass("done")||!(t||n||a))return!1;oe.addClass("is-loading").hide(),ie.fadeIn(),ue.post(ajaxurl,{action:"typolab-export-import-manager",doExport:!0,fontFaces:t,fontSizes:n,fontSettings:a},function(e){if(oe.removeClass("is-loading"),ie.hide(),e.exported){var t=se.find("textarea");t.val(e.exported),se.fadeIn(100,function(){t.select(),oe.addClass("done"),re.addClass("disabled")})}else alert("An error occured, export settings are not avaialble!")},"json")}),ue("#typolab-import-button").on("click",function(e){ue("#save_font_settings").click()})}ue(".downloaded-fonts-list tbody .trash").on("click",function(e){var t;if(!confirm("Are you sure you want to delete font files?\n\nThis won't delete fonts from the list, only font files."))return!1}),ue(".typolab-fonts-list").on("click",".trash",function(e){if(!confirm("Are you sure you want to delete this font?"))return e.preventDefault(),!1});var le=ue(".typolab-select-font-source");if(le.length){var fe=le.find("tbody tr"),pe=function(e){var t=ue(".typolab-select-font-source").outerHeight();t-=ue("#typolab_add_font").outerHeight(!0),ue(".font-source-description").removeClass("selected").filter(".font-source-description-"+e).addClass("selected"),ue(".typolab-selected-font-source").css({minHeight:t})};fe.on("click",function(e){var t=ue(this).find('input[type="radio"]'),n=t.val();fe.removeClass("hover"),t.prop("checked",!0),ue(this).addClass("hover"),pe(n)});var ce=fe.find("input:checked");ce.closest("tr").addClass("hover"),pe(ce.val())}var de=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}})}(jQuery,window);