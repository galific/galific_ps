!function(u,m,e){"use strict";u(document).ready(function(){var i=u(".post-type-portfolio #acf-field-item_type, .post-type-portfolio #acf-field_54c7b3e324244");if(i.length&&void 0===acf.data){var n=u('<div class="portfolio-item-type-images"><div class="loader"></div></div>'),s=u('<div class="portfolio-item-type-warning"></div>'),l=i.val(),e=i.find("option:selected").text(),c=m.location.toString().match(/action=edit/),r={"type-1":"portfolio-item-type-1.png","type-2":"portfolio-item-type-2.png","type-3":"portfolio-item-type-3.png","type-4":"portfolio-item-type-4.png","type-5":"portfolio-item-type-5.png","type-6":"portfolio-item-type-6.png","type-7":"portfolio-item-type-7.png"};i.after(s).after(n),c?s.append("<strong>Note:</strong> You are currently using <strong>"+e+"</strong> type. If you change this portfolio type you may lose some of the current settings."):(acf.screen.item_type=i.val(),u(document).trigger("acf/update_field_groups"),"function"==typeof acf.screen.check&&acf.screen.check());var d={},p=0;d[i.val()]=!0,i.find("option").each(function(e,t){var a=u(t),o=u('<a href="#" class="portfolio-item-type-image-option"><img src="'+_k.kaliumAssetsDir+"images/admin/"+r[a.val()]+'" /><span class="opt-label">'+a.html()+"</span></a>");n.append(o),o.on("click",function(e){e.preventDefault(),i.val(a.val()),f(),n.addClass("is-loading"),void 0!==d[a.val()]&&setTimeout(function(){n.removeClass("is-loading")},500),d[a.val()]=!0,m.clearTimeout(p),p=setTimeout(function(){n.removeClass("is-loading")},3e3),acf.screen.item_type=a.val(),u(document).trigger("acf/update_field_groups"),"function"==typeof acf.screen.check&&acf.screen.check()})});var f=function(){i.find("option").each(function(e,t){var a=u(t),o=n.find(".portfolio-item-type-image-option").eq(e);o.removeClass("active"),a.is(":selected")&&o.addClass("active"),c&&(l!=i.val()?s.slideDown():s.slideUp())})};i.hide(),f(),u(document).on("acf/setup_fields",function(e){n.removeClass("is-loading")}),u(".page-title-action").is(":visible")||u(".acf_postbox").not(i.closest(".acf_postbox")).addClass("acf-hidden")}u("#section-skin_palettes_list .skin-palette").each(function(e,t){var a=u(t),o=[];a.find("span").each(function(e,t){o.push(t.style.backgroundColor)}),a.click(function(e){e.preventDefault(),u("#custom_skin_bg_color").iris("color",o[0]),u("#custom_skin_link_color").iris("color",o[1]),u("#custom_skin_headings_color").iris("color",o[2]),u("#custom_skin_paragraph_color").iris("color",o[3]),u("#custom_skin_footer_bg_color").iris("color",o[4]),u("#custom_skin_borders_color").iris("color",o[5])})}),u(".portfolio-likes-reset[data-id]").each(function(e,t){var a=u(t);a.on("click",function(e){e.preventDefault(),a.addClass("is-loading"),u.post(ajaxurl,{action:"lab_portfolio_reset_likes",post_id:a.data("id")},function(e){a.removeClass("is-loading"),"success"==e&&a.prev(".likes-num").html("0")})})}),u("body").on("click","#restore-default-shop-image-dimensions",function(e){e.preventDefault();var t=u(this),a=t.find("em"),o=1==a.length;if(t.data("busy"))return!1;t.addClass("is-loading").data("busy",!0),o&&!a.data("default")&&a.data("default",a.html()),u.get(ajaxurl,{action:"kalium_woocommerce_reset_image_dimensions",override_shop_image_dimensions:1},function(e){t.data("busy",!1).removeClass("is-loading"),o&&a.data("success")&&(a.fadeTo(150,0,function(){a.html('<i class="fa fa-check"></i> '+a.data("success")).fadeTo(300,1)}),setTimeout(function(){a.fadeTo(150,0,function(){a.html(a.data("default")).fadeTo(300,1)})},3e3))})}),u("#acf-field-page_custom_css").bind("keydown.wpevent_InsertTab",function(e){var t=e.target,a,o,i,n,s;if(27==e.keyCode)return e.preventDefault(),void u(t).data("tab-out",!0);9!=e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||(u(t).data("tab-out")?u(t).data("tab-out",!1):(a=t.selectionStart,o=t.selectionEnd,i=t.value,document.selection?(t.focus(),(s=document.selection.createRange()).text="\t"):0<=a&&(n=this.scrollTop,t.value=i.substring(0,a).concat("\t",i.substring(o)),t.selectionStart=t.selectionEnd=a+1,this.scrollTop=n),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()))})}),u(document).ready(function(){var o=u("#kalium-acf5-pro-install-button");o.length&&o.on("click",function(e){if(e.preventDefault(),o.hasClass("disabled")||o.hasClass("done"))o.hasClass("done")&&m.location.reload();else{o.addClass("disabled").append("&hellip;");var t=!1,a=!1;u.post(m.location.pathname,{kalium_acf4_deactivate:1},function(e){"1"==e?(t=!0,u.post(m.location.pathname,{kalium_acf5_activate:1},function(e){2<e.length&&(e=u.trim(e.replace(/.*>/gi,""))),"1"==e?(a=!0,o.html("&#10003; Great! Please refresh the page").removeClass("disabled").addClass("done button-primary")):"-1"==e?(o.html("ACF5 could not be activated!"),o.after(" <span>Please try activating the plugin manually from Plugins page.</span>")):(o.html("ACF5 could not be installed!"),o.after(" <span>Please try installing the plugin manually from <strong>Appearance &gt; Install Plugins</strong> page.</span>"))})):(o.html("ACF4 plugin could not be deactivated!"),o.after(" <span>Please try deactivating the plugin manually from Plugins page.</span>"))})}})})}(jQuery,window);