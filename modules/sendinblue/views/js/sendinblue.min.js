/**
* 2007-2018 PrestaShop
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* that is bundled with this package in the file LICENSE.txt.
* It is also available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade PrestaShop to newer
* versions in the future. If you wish to customize PrestaShop for your
* needs please refer to http://www.prestashop.com for more information.
*
* @author    PrestaShop SA <contact@prestashop.com>
* @copyright 2007-2018 PrestaShop SA
* @license   http://opensource.org/licenses/afl-3.0.php Academic Free License (AFL 3.0)
* International Registered Trademark & Property of PrestaShop SA
*/

function isNormalInteger(e){return/^\+?(0|[0-9]\d*)$/.test(e)}function RegexEmail(e){var t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,a=t.test(e);return a}function validate(e,t){return""==document.notify_sms_mail_form.sendin_notify_email.value||0==RegexEmail(document.notify_sms_mail_form.sendin_notify_email.value)?(alert(e),document.notify_sms_mail_form.sendin_notify_email.focus(),!1):document.notify_sms_mail_form.sendin_notify_value.value<=0||0==isNormalInteger(document.notify_sms_mail_form.sendin_notify_value.value)?(alert(t),document.notify_sms_mail_form.sendin_notify_value.focus(),!1):!0}function isInteger(e){var t=/^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/;return!!t.test(e)}$(document).ready(function(){function e(e){$(".msgclear").hide(),$(".header").before('<div class="msgclear"><div class="bootstrap"><div class="module_confirmation conf confirm alert alert-success">'+e+"</div></div></div>")}function t(e){$(".msgclear").hide(),$(".header").before('<div class="msgclear"><div class="bootstrap"><div class="module_error alert alert-danger">'+e+"</div></div></div>")}function a(e,t){$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxemailresult.php",data:{page:e,token:t,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(e){return $("#ajax-busy").hide(),$(".midleft").html(e),$(".midleft").ajaxComplete(function(){$(".midleft").html(e)}),!0}})}var s=jQuery("#customtoken").val(),n=jQuery("#id_shop_group").val(),i=jQuery("#id_shop").val();jQuery("#iso_code").val();if(!$("#apikeybox").is(":hidden")){$("#sender_order").keyup(function(){var e=$(this).val();isInteger(e)||0==e.length?($("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-e.length)):($("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-e.length))}),$(".manage_subscribe_block input[name=subscribe_confirm_type]").click(function(){$(".manage_subscribe_block .inner_manage_box").slideUp(),$(this).parents(".manage_subscribe_block").find(".inner_manage_box").slideDown()}),$(".openCollapse").click(function(){$(this).is(":checked")?$(this).parent(".form-group").find(".collapse").slideDown():$(this).parent(".form-group").find(".collapse").slideUp()}),$("#template_doubleoptin").bind("change",function(){var e=$(this).find("option:selected").text().toLowerCase().indexOf("double optin");if(-1===e){alert("You must select a template with the tag [DOUBLEOPTIN]");var t=$("#template_doubleoptin option").filter(function(){return-1!==$(this).text().toLowerCase().indexOf("double optin")});t.attr("selected",!0),$(this).val(t.val())}}),window.onload=function(){var e=$("#newsletter").val();$("#newsletter").append('<input type="hidden" id="sendinflag" value="'+e+'" name="sendinflag">')},$("#sender_order").keyup(function(){var e=$(this).val();e=e.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_order").val(e)}),$("#sender_shipment").keyup(function(){var e=$(this).val();e=e.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_shipment").val(e)}),$("#sender_campaign").keyup(function(){var e=$(this).val();e=e.replace(/[^a-zA-Z 0-9]+/g,""),$("#sender_campaign").val(e)});var r=$("#sender_order"),o=r.val();if(o&&(isInteger(o)||0==o.length?($("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-o.length)):($("#sender_order").attr("maxlength","11"),$("#sender_order_text").text(11-o.length))),$("#sender_order").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_order_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),a=160*t-(e%(160*t)||160*t);0==a&&(a=160),$("#sender_order_message_text").text(a),$("#sender_order_message_text_count").text(t)}),"undefined"!=typeof $("#sender_order_message").val()){var d=$("#sender_order_message").val().length,l=Math.ceil(d/160),c=160*l-(d%(160*l)||160*l);$("#sender_order_message_text").text(c),$("#sender_order_message_text_count").text(l)}$("#sender_shipment").keyup(function(){var e=$(this).val();isInteger(e)||0==e.length?($("#sender_shipment").attr("maxlength","11"),$("#sender_shipment_text").text(11-e.length)):($("#sender_shipment").attr("maxlength","11"),$("#sender_shipment_text").text(11-e.length))});var u=$("#sender_campaign"),h=u.val();if(h&&(isInteger(h)||0==h.length?($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-h.length)):($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-h.length))),$("#sender_campaign").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_shipment_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),a=160*t-(e%(160*t)||160*t);0==a&&(a=160),$("#sender_shipment_message_text").text(a),$("#sender_shipment_message_text_count").text(t)}),"undefined"!=typeof $("#sender_shipment_message").val()){var d=$("#sender_shipment_message").val().length,l=Math.ceil(d/160),c=160*l-(d%(160*l)||160*l);$("#sender_shipment_message_text").text(c),$("#sender_shipment_message_text_count").text(l)}$("#sender_campaign").keyup(function(){var e=$(this).val();isInteger(e)||0==e.length?($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-e.length)):($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-e.length))});var u=$("#sender_campaign"),h=u.val();if(h&&(isInteger(h)||0==h.length?($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-h.length)):($("#sender_campaign").attr("maxlength","11"),$("#sender_campaign_text").text(11-h.length))),$("#sender_campaign").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#sender_campaign_message").keyup(function(){var e=this.value.length,t=Math.ceil(e/160),a=160*t-(e%(160*t)||160*t);0==a&&(a=160),$("#sender_campaign_message_text").text(a),$("#sender_campaign_message_text_count").text(t)}),"undefined"!=typeof $("#sender_campaign_message").val()){var d=$("#sender_campaign_message").val().length,l=Math.ceil(d/160),c=160*l-(d%(160*l)||160*l);$("#sender_campaign_message_text").text(c),$("#sender_campaign_message_text_count").text(l)}$(".sms_order_setting_cls").click(function(){var t=$("input:radio[name=sms_order_setting]:checked").val(),a="Order";$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"orderSetting="+t+"&token="+s+"&type="+a+"&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide(),1==t?jQuery(".hideOrder").show():jQuery(".hideOrder").hide(),e(a),$("html, body").animate({scrollTop:0},"slow")}})}),$(".sms_shiping_setting_cls").click(function(){var t=$("input:radio[name=sms_shiping_setting]:checked").val(),a="shiping";$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"shipingSetting="+t+"&token="+s+"&type="+a+"&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide(),1==t?jQuery(".hideShiping").show():jQuery(".hideShiping").hide(),e(a),$("html, body").animate({scrollTop:0},"slow")}})}),$(".sms_campaign_setting_cls").click(function(){var t=$("input:radio[name=sms_campaign_setting]:checked").val(),a="campaign";$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"campaignSetting="+t+"&token="+s+"&type="+a+"&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide(),1==t?jQuery(".hideCampaign").show():jQuery(".hideCampaign").hide(),e(a),$("html, body").animate({scrollTop:0},"slow")}})}),0==$("input:radio[name=sms_order_setting]:checked").val()?$(".hideOrder").hide():$(".hideOrder").show(),$(".Sendin_Sms_Choice").click(function(){1==jQuery(this).val()?(jQuery(".multiplechoice").hide(),jQuery(".singlechoice").show()):(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide())}),$("#sib_datetimepicker").datepicker({dateFormat:"yy-mm-dd"}),$(".sms_shiping_setting_cls").click(function(){1==$("input:radio[name=sms_shiping_setting]:checked").val()?jQuery(".hideShiping").show():jQuery(".hideShiping").hide()}),jQuery("input:radio[name=Sendin_Sms_Choice]").click(function(){var e=jQuery(this).val();0==e?(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide(),jQuery(".sib_datepicker").hide()):2==e?(jQuery(".multiplechoice").show(),jQuery(".singlechoice").hide(),jQuery(".sib_datepicker").show()):(jQuery(".singlechoice").show(),jQuery(".multiplechoice").hide(),jQuery(".sib_datepicker").hide())}),$(".sms_shiping_setting_cls").click(function(){1==$("input:radio[name=sms_shiping_setting]:checked").val()?jQuery(".hideShiping").show():jQuery(".hideShiping").hide()}),jQuery("#r1_Sendin_Sms_Choice").attr("checked",!0),0==$("input:radio[name=sms_credit]:checked").val()?jQuery(".hideCredit").hide():jQuery(".hideCredit").show(),$(".sms_credit_cls").click(function(){var t=jQuery("input:radio[name=sms_credit]:checked").val(),a="sms_credit";$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderSetting.php",data:"sms_credit="+t+"&token="+s+"&type="+a+"&id_shop_group="+n+"&id_shop="+i,beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide(),1==t?jQuery(".hideCredit").show():jQuery(".hideCredit").hide(),e(a),$("html, body").animate({scrollTop:0},"slow")}})}),0==$("input:radio[name=sms_shiping_setting]:checked").val()?$(".hideShiping").hide():$(".hideShiping").show(),$(".sms_campaign_setting_cls").click(function(){1==$("input:radio[name=sms_shiping_setting]:checked").val()?jQuery(".hideCampaign").show():jQuery(".hideCampaign").hide()}),0==$("input:radio[name=sms_campaign_setting]:checked").val()?$(".hideCampaign").hide():$(".hideCampaign").show(),$("#selectSmsList").multiselect({header:!1,checkall:!1}),$("#tabs li").click(function(){$("#tabs li").removeClass("active"),$(this).addClass("active"),$(".tab_content").hide();var e=$(this).find("a").attr("href");return $(e).fadeIn(),!1})}$("#showUserlist").click(function(){if($("#userDetails").is(":hidden")){var e=$(".midleft tr").length;0>=e?a(1,s)&&($("#Spantextless").show(),$("#Spantextmore").hide()):($("#Spantextless").show(),$("#Spantextmore").hide())}else $("#Spantextmore").show(),$("#Spantextless").hide();$("#userDetails").slideToggle()}),$("#select").multiselect({header:!1,checkall:!1}),$(".keyyes").click(function(){1==jQuery(this).val()?(jQuery("#apikeybox").show(),jQuery(".hidetableblock").show(),jQuery(".unsubscription").show(),jQuery(".listData").show()):(jQuery("#apikeybox").hide(),jQuery(".hidetableblock").hide(),jQuery(".unsubscription").hide(),jQuery(".listData").hide())}),$(".scriptcls").click(function(){var t=$("input:radio[name=script]:checked").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajax.php",data:{script:t,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(t){$("#ajax-busy").hide(),e(t)}})}),$(".smtptestclickcls").click(function(){var t=$("input:radio[name=smtpmail]:checked").val(),a=jQuery("#customtoken").val();0==t&&$("#smtptest").hide(),1==t&&$("#smtptest").show(),$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxsmtpconfig.php",data:{smtptest:t,token:a,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(t){$("#ajax-busy").hide(),e(t)}})});var m=$("input:radio[name=managesubscribe]:checked").val();0==m?$(".managesubscribeBlock").hide():$(".managesubscribeBlock").show(),$(".managesubscribecls").click(function(){var a=$("input:radio[name=managesubscribe]:checked").val(),s=jQuery("#customtoken").val(),r=jQuery("#defaultnlmsg").val();0==a&&$(".managesubscribeBlock").hide(),1==a&&$(".managesubscribeBlock").show(),$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxsubscribeconfig.php",data:{managesubscribe:a,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(a){"error"==a?t(r):e(a),$("#ajax-busy").hide()}})});var s=jQuery("#customtoken").val();$('<div id="ajax-busy"/> loading..').css({opacity:.5,position:"fixed",top:0,left:0,width:"100%",height:$(window).height()+"px",background:"white url("+base_url+"modules/sendinblue/views/img/loader.gif) no-repeat center"}).hide().appendTo("body"),$(".clssubmitautomation").click(function(){var e=$("input:radio[name=automation_radio]:checked").val(),t=$("#automsg").val();if(0==e){var a=confirm(t);if(a===!1)return}$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxAutomation.php",data:{automation_radio:e,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(){$("#ajax-busy").hide()}})});var p=window.location.href,_=p.split("#");_[1]?($(".main-tabs-content").find(".tab-pane").removeClass("active"),$(".main-tabs-content").find("#"+_[1]).addClass("active"),$(".main-tabs a").removeClass("active"),$(".main-tabs a#"+_[1]).addClass("active"),$("#tabs a").click(function(){var e=$(this).attr("href");$("#tabs li").removeClass("active"),$(this).parent("li").addClass("active"),$("#tab1, #tab2, #tab3").css("display","none"),$(e).css("display","block"),$("#tabs_content_container .tab_content").fadeOut(),$("#tabs_content_container "+e).fadeIn()})):($(".main-tabs-content").find("#about-sendinblue").addClass("active"),$(".main-tabs a#about-sendinblue").addClass("active")),$(".ajax_contacts_href").live("click",function(){var e=$(this).attr("email"),t=$(this).attr("status"),s=jQuery("#customtoken").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxcall.php",data:{email_value:e,newsletter_value:t,token:s,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(){$("#ajax-busy").hide()}});var r=$("#page_no").val();a(r,s)}),$(".ajax_sms_href").live("click",function(){var e=$(this).attr("email"),t=jQuery("#customtoken").val(),s=$(this).parent("td").find("#sms_status_val").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxSmsStatus.php",data:{email:e,sms_blacklist_status:s,token:t,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(){$("#ajax-busy").hide()}});var r=$("#page_no").val();a(r,t)}),$("#oem_list").change(function(){var e="",t=$("#oem_list option:selected").length-1;$("#oem_list option:selected").each(function(a){e+=$(this).text(),t>a&&(e+=",")}),$("#em_text_val").val(e)}).change(),$(".ordertrackingcls").click(function(){var e=jQuery("input:radio[name=script]:checked").val();jQuery("#customtoken").val();0==e&&$(".ordertrack").hide(),1==e&&$(".ordertrack").show()}),$("#importOrderTrack").click(function(){var t=jQuery("#importmsg").val(),a=jQuery("#customtoken").val();$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxOrderTracking.php",data:{token:a,id_shop_group:n,id_shop:i},beforeSend:function(){$("#ajax-busy").show()},success:function(){$("#ajax-busy").hide(),$(".ordertrack").hide(),e(t),$("html, body").animate({scrollTop:0},"slow")}})}),$(".pagination li.active").livequery("click",function(){var e=$(this).attr("p");$("#page_no").val(e),a(e,s)}),$(".toolTip").live("mouseover mouseout",function(e){var t=$(this).attr("title"),a=$(this).offset();if("mouseover"==e.type){$("body").append('<div id="tipkk" style="top:'+a.top+"px; left:"+a.left+'px; ">'+t+"</div>");var s=$("#tipkk").height()+25;$("#tipkk").css("top",a.top-s+"px")}else"mouseout"==e.type&&$("#tipkk").remove()}),1==$("input[name=status]:checked").val()&&""!=$("input#apikeys").val()?($("#left-part").addClass("right-opened"),$("#right-part").show()):($("#left-part").removeClass("right-opened"),$("#right-part").hide()),$("input[name=status]#n").click(function(){setTimeout(function(){$("#left-part").removeClass("right-opened")},500),$("#right-part").hide()}),$("input[name=status]#y").click(function(){setTimeout(function(){$("#left-part").addClass("right-opened")},500),$("#right-part").show(),$(".tableblock").show()}),$(".main-tabs a").click(function(){var e=$(this).attr("data-id");$(".main-tabs-content .tab-pane.active").removeClass("active"),$(".main-tabs-content "+e).addClass("active"),$(".main-tabs a.active").removeClass("active"),$(this).addClass("active")})}),$(".testOrdersmssend").live("click",function(){var e=$(this).attr("successmsg"),t=$(this).attr("failmsg"),a=$("#customtoken").val(),s=$("#langvalue").val(),n=$("#sender_order").val(),i=$("#sender_order_message").val(),r=$("#sender_order_number").val(),o=$("#id_shop_group").val(),d=$("#id_shop").val(),l=$("#iso_code").val();return $.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxtestsms.php",data:{sender:n,message:i,number:r,langvalue:s,token:a,id_shop_group:o,id_shop:d,iso_code:l},beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide();var s=$.parseJSON(a);1==s.result?alert(e):alert(t)}}),!1}),$(".testSmsShipped").live("click",function(){var e=$(this).attr("successmsg"),t=$(this).attr("failmsg"),a=$("#customtoken").val(),s=$("#langvalue").val(),n=$("#sender_shipment").val(),i=$("#sender_shipment_message").val(),r=$("#sender_shipment_number").val(),o=$("#id_shop_group").val(),d=$("#id_shop").val(),l=$("#iso_code").val();return $.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxTestSmsShipped.php",data:{sender:n,message:i,number:r,langvalue:s,token:a,id_shop_group:o,id_shop:d,iso_code:l},beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide();var s=$.parseJSON(a);1==s.result?alert(e):alert(t)}}),!1}),$(".testSmsCampaignsend").live("click",function(){var e=$(this).attr("successmsg"),t=$(this).attr("failmsg"),a=$(this).attr("sendererr"),s=$(this).attr("mobileerr"),n=$(this).attr("messageerr"),i=$("#customtoken").val(),r=$("#langvalue").val(),o=$("#sender_campaign").val(),d=$("#sender_campaign_message").val(),l=$("#sender_campaign_number_test").val(),c=$("#id_shop_group").val(),u=$("#id_shop").val();return""==o?alert(a):""==d?alert(n):""==l?alert(s):$.ajax({type:"POST",async:!1,url:base_url+"modules/sendinblue/ajaxCampaignSmsTest.php",data:{sender:o,message:d,number:l,langvalue:r,token:i,id_shop_group:c,id_shop:u},beforeSend:function(){$("#ajax-busy").show()},success:function(a){$("#ajax-busy").hide();var s=$.parseJSON(a);1==s.result?alert(e):alert(t)}}),!1}),$(".sender_order_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),a=$("#sender_order").val(),s=$("#sender_order_message").val();return""==a?(alert(e),document.getElementById("sender_order").focus(),!1):""==s?(alert(t),document.getElementById("sender_order_message").focus(),!1):void 0}),$(".sender_shipment_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),a=$("#sender_shipment").val(),s=$("#sender_shipment_message").val();return""==a?(alert(e),document.getElementById("sender_shipment").focus(),!1):""==s?(alert(t),document.getElementById("sender_shipment_message").focus(),!1):void 0}),$(".sender_campaign_save").live("click",function(){var e=$(this).attr("senderfield"),t=$(this).attr("messagefield"),a=$("#sender_campaign").val(),s=$("#sender_campaign_message").val();return""==a?(alert(e),document.getElementById("sender_campaign").focus(),!1):""==s?(alert(t),document.getElementById("sender_campaign_message").focus(),!1):void 0});